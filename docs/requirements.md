# 要件定義書

**プロジェクト名**: X Banner Studio
**バージョン**: 1.0.0
**最終更新日**: 2025-11-02
**ステータス**: 開発中

---

## 1. プロジェクト概要

### 1.1 背景
SNS（特にX/Twitter）でプロフィールの第一印象を決定づけるバナー画像は、個人のブランディングやビジネスアピールにおいて重要な役割を果たす。しかし、多くのユーザーはPhotoshopなどのプロフェッショナルツールの操作スキルを持たず、適切なバナーを作成できない課題がある。

### 1.2 目的
- デザインスキル不要で、魅力的なSNSバナーを簡単に作成できるツールを提供
- ブラウザ上で完結し、即座にダウンロード可能な体験を実現
- X推奨サイズ（1500×500px）に最適化されたバナー生成

### 1.3 対象ユーザー
| ユーザータイプ | ニーズ | 優先度 |
|------------|------|-------|
| 一般SNSユーザー | 個性的なプロフィール作成 | 高 |
| 企業・個人事業主 | ブランドアピール用バナー | 高 |
| クリエイター・配信者 | プロフェッショナルな見た目 | 中 |
| イベント主催者 | イベント告知用バナー | 中 |

---

## 2. 機能要件

### 2.1 MVP（Minimum Viable Product）機能

#### F-001: キャンバス生成
- **優先度**: P0（必須）
- **説明**: X推奨サイズのキャンバスを生成
- **仕様**:
  - 固定サイズ: 1500×500px
  - 背景タイプ: 単色、グラデーション、画像アップロード対応
  - デフォルト背景色: #1DA1F2（Xブルー）
- **受け入れ基準**:
  - [ ] 1500×500pxのキャンバスが正しく表示される
  - [ ] 背景色をカラーピッカーで変更できる
  - [ ] グラデーション背景を2色で設定できる
  - [ ] 画像ファイル（PNG/JPG）をアップロードして背景に設定できる

#### F-002: テキスト編集
- **優先度**: P0（必須）
- **説明**: キャンバス上にテキストを追加・編集
- **仕様**:
  - テキスト入力フィールド
  - フォント選択（Google Fonts統合）
  - 日本語フォント対応（Noto Sans JP, Zen Kaku Gothic等）
  - フォントサイズ調整（12px～200px）
  - 文字色変更（カラーピッカー）
  - テキスト位置調整（ドラッグ＆ドロップ）
  - テキスト整列（左、中央、右）
- **受け入れ基準**:
  - [ ] テキストを追加できる
  - [ ] 日本語フォントが正しく表示される
  - [ ] フォントサイズを変更できる
  - [ ] 文字色を変更できる
  - [ ] テキストをドラッグで移動できる

#### F-003: リアルタイムプレビュー
- **優先度**: P0（必須）
- **説明**: 設定変更を即座にキャンバスに反映
- **仕様**:
  - すべての変更が200ms以内に反映
  - スムーズな描画更新
  - レスポンシブ表示（デバイスに応じた縮小表示）
- **受け入れ基準**:
  - [ ] テキスト入力時に即座にプレビューが更新される
  - [ ] 背景変更時に即座にプレビューが更新される
  - [ ] スマホ・タブレットでも正しく表示される

#### F-004: PNG出力
- **優先度**: P0（必須）
- **説明**: 作成したバナーをPNG形式でダウンロード
- **仕様**:
  - ファイル名: `x-banner-{timestamp}.png`
  - 解像度: 1500×500px（オリジナルサイズ）
  - 品質: 高解像度（非圧縮）
  - ダウンロードボタンをクリックで即時保存
- **受け入れ基準**:
  - [ ] ボタンクリックでPNGファイルがダウンロードされる
  - [ ] ダウンロードした画像が1500×500pxである
  - [ ] 画像品質が十分である（ぼやけていない）

---

### 2.2 将来的な拡張機能（Phase 2以降）

#### F-101: テンプレートシステム
- **優先度**: P1
- **説明**: プリセットデザインテンプレート
- **カテゴリ**:
  - ビジネス（名刺風、プロフェッショナル）
  - カジュアル（ポップ、カラフル）
  - イベント（セミナー、ライブ告知）
  - 季節（桜、海、紅葉、雪）
- **仕様**:
  - テンプレートギャラリー表示
  - ワンクリック適用
  - テンプレート後のカスタマイズ可能

#### F-102: AIキャッチコピー生成
- **優先度**: P2
- **説明**: AIによるテキスト提案機能
- **仕様**:
  - ユーザーがキーワード入力（例: "Web開発者", "カフェ経営"）
  - OpenAI APIで3～5つの候補を生成
  - 候補から選択してキャンバスに適用
- **技術要件**:
  - OpenAI API（GPT-4o-mini）
  - 環境変数でAPIキー管理
  - レート制限対応

#### F-103: プロフィール画像位置ガイド
- **優先度**: P1
- **説明**: Xのプロフィール画像と重なる領域を表示
- **仕様**:
  - 左下に円形のガイドライン表示（点線）
  - ガイドの表示/非表示切り替え
  - ガイド位置の調整機能

#### F-104: AI背景生成
- **優先度**: P3
- **説明**: AIによる背景画像自動生成
- **仕様**:
  - テキストプロンプト入力（例: "夕焼けの海"）
  - Stability AI / DALL-E 3で画像生成
  - 生成された画像を背景に適用
- **技術要件**:
  - Stability AI APIまたはOpenAI DALL-E 3
  - 生成時間の待機UI（ローディング表示）

#### F-105: 複数テキストレイヤー
- **優先度**: P1
- **説明**: 複数のテキストオブジェクトを配置
- **仕様**:
  - テキストレイヤーのリスト表示
  - レイヤーごとの表示/非表示切り替え
  - レイヤーの重なり順調整
  - レイヤー削除機能

#### F-106: シェイプ・装飾追加
- **優先度**: P2
- **説明**: 図形や装飾要素を追加
- **仕様**:
  - 矩形、円、線などの基本図形
  - アイコン素材（Font Awesome等）
  - 透明度調整
  - 回転・拡大縮小

---

## 3. 非機能要件

### 3.1 パフォーマンス
| 項目 | 目標値 | 測定方法 |
|-----|-------|---------|
| 初期ロード時間 | < 2秒 | Lighthouse |
| プレビュー更新 | < 200ms | 開発者ツール |
| PNG生成時間 | < 2秒 | 手動計測 |
| Lighthouse Performance Score | > 90 | Lighthouse CI |

### 3.2 ブラウザ対応
- **デスクトップ**:
  - Chrome 最新版
  - Firefox 最新版
  - Safari 最新版
  - Edge 最新版
- **モバイル**:
  - iOS Safari 14+
  - Android Chrome 最新版

### 3.3 レスポンシブ対応
- **デスクトップ**: 1200px以上（最適）
- **タブレット**: 768px～1199px
- **モバイル**: 375px～767px

### 3.4 セキュリティ
- **画像アップロード**: ファイルタイプ検証（PNG/JPG/GIF のみ）
- **ファイルサイズ制限**: 5MB以下
- **XSS対策**: ユーザー入力のサニタイズ
- **API呼び出し**: レート制限対応

### 3.5 アクセシビリティ
- **WCAG 2.1 Level AA準拠**
- キーボードナビゲーション対応
- スクリーンリーダー対応
- 適切なARIAラベル

### 3.6 運用要件
- **ホスティング**: Vercel（無料プラン）
- **データ保存**: ブラウザローカルストレージ（サーバー保存なし）
- **バックアップ**: GitHub自動バックアップ
- **モニタリング**: Vercel Analytics

---

## 4. 制約条件

### 4.1 技術的制約
- フロントエンドのみで完結（バックエンド不要）
- サーバーサイド処理を最小限に抑える
- AI機能は将来的にオプション（無料版は非対応）

### 4.2 ビジネス制約
- 初期段階は完全無料
- 広告表示なし
- ユーザー登録不要

### 4.3 スケジュール
- **Phase 1（MVP）**: 2週間
- **Phase 2（拡張機能）**: 4週間
- **Phase 3（AI機能）**: 6週間

---

## 5. 受け入れテスト

### 5.1 E2Eテストシナリオ

#### シナリオ1: 基本的なバナー作成
1. アプリにアクセス
2. 背景色を選択
3. テキストを入力
4. フォントを変更
5. PNGをダウンロード
6. ダウンロードファイルを確認

**期待結果**: 設定通りのバナーがダウンロードされる

#### シナリオ2: 画像背景使用
1. 画像をアップロード
2. テキストを配置
3. テキスト色を白に変更（視認性確保）
4. PNGをダウンロード

**期待結果**: 画像背景とテキストが正しく合成される

#### シナリオ3: モバイルでの操作
1. スマホでアプリにアクセス
2. 背景色を選択
3. テキストを入力
4. PNGをダウンロード

**期待結果**: モバイルでもスムーズに操作できる

---

## 6. リスク管理

| リスク | 影響度 | 発生確率 | 対策 |
|-------|-------|---------|-----|
| Google Fonts読み込み失敗 | 高 | 低 | フォールバックフォント設定 |
| 大きな画像でメモリ不足 | 中 | 中 | ファイルサイズ制限（5MB） |
| ブラウザ互換性問題 | 中 | 低 | Polyfill導入、クロスブラウザテスト |
| AI API費用超過 | 高 | 中 | レート制限、プリペイド設定 |

---

## 7. 成功指標（KPI）

### Phase 1（MVP）
- [ ] 週間アクティブユーザー: 100人
- [ ] バナーダウンロード数: 500枚/月
- [ ] 平均セッション時間: 3分以上

### Phase 2（拡張機能）
- [ ] 週間アクティブユーザー: 1,000人
- [ ] バナーダウンロード数: 5,000枚/月
- [ ] テンプレート使用率: 60%以上

---

## 8. 用語集

| 用語 | 定義 |
|-----|-----|
| キャンバス | バナー画像を作成する1500×500pxの作業領域 |
| プレビュー | リアルタイムで表示されるバナーの完成イメージ |
| Google Fonts | Googleが提供する無料Webフォントサービス |
| Fabric.js | Canvas操作を簡単にするJavaScriptライブラリ |
| MVP | Minimum Viable Product（最小限の機能を持つ製品） |

---

## 変更履歴

| 日付 | バージョン | 変更内容 | 担当者 |
|-----|----------|---------|-------|
| 2025-11-02 | 1.0.0 | 初版作成 | - |
